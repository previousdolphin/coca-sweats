<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Concept Page</title>
    <style>
        /* --- 1. CSS Variables for Theming --- */
        :root {
            /* Light Mode Defaults */
            --bg-color: #f4f4f0;
            --text-color: #1a1a1a;
            --card-bg: #ffffff;
            --accent-color: #333;
            --grain-opacity: 0.04;
        }

        [data-theme="dark"] {
            /* Dark Mode Overrides */
            --bg-color: #121212;
            --text-color: #e0e0e0;
            --card-bg: #1e1e1e;
            --accent-color: #ffffff;
            --grain-opacity: 0.07; /* Slightly higher in dark mode for visibility */
        }

        /* --- 2. Global Resets & Scrolling Fixes --- */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html, body {
            width: 100%;
            /* min-height ensures it covers screen but allows scrolling */
            min-height: 100vh; 
            overflow-x: hidden; /* Prevent horizontal scroll only */
        }

        body {
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: background-color 0.3s ease, color 0.3s ease;
            line-height: 1.6;
            padding: 20px;
            /* Ensure content sits above the grain background if needed */
            position: relative;
        }

        /* --- 3. The Subtle Grain Effect --- */
        .grain-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none; /* Allows clicking through the grain */
            z-index: 9998;
            opacity: var(--grain-opacity);
            /* SVG Noise Data URI */
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
        }

        /* --- 4. Content Container --- */
        .container {
            max-width: 600px;
            margin: 40px auto; /* Centered with vertical space */
            position: relative;
            z-index: 1; /* Above grain */
        }

        h1 {
            font-weight: 300;
            letter-spacing: -0.5px;
            margin-bottom: 2rem;
            font-size: 2rem;
        }

        p {
            margin-bottom: 1.5rem;
            font-size: 1.1rem;
        }

        .card {
            background-color: var(--card-bg);
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            margin-bottom: 2rem;
            transition: background-color 0.3s ease;
        }

        /* --- 5. Dark/Light Mode Toggle Button --- */
        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999; /* Topmost layer */
            background: var(--card-bg);
            color: var(--text-color);
            border: 1px solid var(--accent-color);
            padding: 8px 16px;
            border-radius: 30px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 600;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            user-select: none;
        }

        .theme-toggle:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        /* Mobile Adjustment for Content vs Toggle */
        @media (max-width: 480px) {
            .container {
                margin-top: 60px; /* Push content down so toggle doesn't cover it */
            }
            h1 {
                font-size: 1.75rem;
            }
        }
    </style>
</head>
<body>

    <div class="grain-overlay"></div>

    <button class="theme-toggle" id="themeToggle" aria-label="Toggle Dark Mode">
        Mode
    </button>

    <div class="container">
        <h1>CoCA Philosophy</h1>
        
        <div class="card">
            <p><strong>Scroll Test:</strong> This layout uses a standard document flow. It allows the page to expand vertically based on the amount of text.</p>
            <p>The "grain" effect you see is an SVG noise filter overlaying the entire screen with <code>pointer-events: none</code>, so it adds texture without blocking clicks or scrolling.</p>
        </div>

        <div class="card">
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
            <p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
        </div>

        <div class="card">
            <p>You can click the "Mode" button in the top right to switch between light and dark themes. The grain texture persists in both.</p>
            <p>Adding more text here to ensure the page is long enough to require scrolling on mobile devices...</p>
            <p>End of content.</p>
        </div>
    </div>

    <script>
        const toggleBtn = document.getElementById('themeToggle');
        const htmlElement = document.documentElement;

        // Check for saved user preference, if any, on load
        const currentTheme = localStorage.getItem('theme') ? localStorage.getItem('theme') : null;

        if (currentTheme) {
            htmlElement.setAttribute('data-theme', currentTheme);
            updateBtnText(currentTheme);
        }

        toggleBtn.addEventListener('click', () => {
            const current = htmlElement.getAttribute('data-theme');
            const newTheme = current === 'dark' ? 'light' : 'dark';
            
            htmlElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme); // Save preference
            updateBtnText(newTheme);
        });

        function updateBtnText(theme) {
            // Optional: Change button text based on mode
            toggleBtn.textContent = theme === 'dark' ? 'Light Mode' : 'Dark Mode';
        }
    </script>
</body>
</html>
