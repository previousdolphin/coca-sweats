<body>
    <nav>
        <div style="display: flex; align-items: center; gap: 10px;">
            <img src="CoCA-Vector-redrawn-photoshop.svg" class="logo" alt="CoCA Logo">
        </div>
        <button id="theme-toggle" class="btn-toggle">üåë DARK</button>
    </nav>

    <section class="manifesto">
        <div class="warning-badge uppercase">Legal Accelerant</div>
        <h1 class="uppercase">These are not products.<br>These are accelerants.</h1>
        <p class="uppercase">
            WE REJECT COPYRIGHT. WE ASSUME THE RISK.<br>
            You are ensuring the inevitable court case has the funding to exist.<br><br>
            <strong>DON'T WITNESS THE LAWSUIT. FINANCE IT.</strong><br>
            <span class="text-red">LIMITED EDITION.</span>
        </p>
    </section>

    <main class="relic-grid" id="relic-grid">
        <div class="door" onclick="selectRelic('candle')">
            <div class="door-number">01</div>
            <div class="door-header">
                <span class="preorder-tag uppercase">PRE-ORDER</span>
                <span class="door-title uppercase">LO-003: FEMALE SEXUAL FRUSTRATION</span>
                <span class="door-price">$88.00</span>
            </div>
            <div class="door-visual">
                <img src="IMG_2844.jpeg" alt="Liturgical Object 003" onerror="this.style.display='none'; this.parentNode.innerHTML='<div style=\'opacity:0.5\'>[VISUAL RENDER MISSING]</div>'">
            </div>
            <div class="door-desc uppercase">
                <strong>Compounded in the Simulation.</strong> Scented with female plants denied pollination. Smells like unfulfilled potential.
            </div>
            <button class="btn-enter">Burn The Injunction</button>
        </div>

        <div class="door" onclick="selectRelic('bible')">
            <div class="door-number">02</div>
            <div class="door-header">
                <span class="scarcity-tag uppercase">LIMITED EDITION</span>
                <span class="door-title uppercase">The Doctrine</span>
                <span class="door-price">$1200.00</span>
            </div>
            <div class="door-visual">
                 <video autoplay loop muted playsinline>
                    <source src="coca4.mp4" type="video/mp4">
                 </video>
            </div>
            <div class="door-desc uppercase">
                <strong>Leather Bound.</strong> Red Letter Edition. 6.5" x 9.5". You fund the precedent. We bear the burden of law.
            </div>
            <button class="btn-enter">Fund the Precedent</button>
        </div>

        <div class="door" onclick="selectRelic('tracksuit')">
            <div class="door-number">03</div>
            <div class="door-number">03</div>
            <div class="door-header">
                <span class="scarcity-tag uppercase">LIMITED EDITION</span>
                <span class="door-title uppercase">CoCA Tracksuit</span>
                <span class="door-price">$450.00</span>
            </div>
            <div class="door-visual">
                <video autoplay loop muted playsinline>
                    <source src="coca3.mp4" type="video/mp4">
                </video>
            </div>
            <div class="door-desc uppercase">
                Heavyweight Cotton. Oversized Fit. To wear this is to force the issue.
            </div>
            <button class="btn-enter">Force The Issue</button>
        </div>

        <div class="door" onclick="selectRelic('founder')" style="background-color: rgba(255, 51, 51, 0.03);">
            <div class="door-number text-red">04</div>
            <div class="door-header">
                <span class="scarcity-tag uppercase">LIMITED EDITION</span>
                <span class="door-title uppercase text-red">The Commitment</span>
                <span class="door-price text-red">$1500.00</span>
            </div>
            <div class="door-visual">
                <div style="display:grid; grid-template-columns: 1fr 1fr; gap:5px; width:100%; height:100%;">
                    <video autoplay loop muted playsinline style="width:100%; height:100%; object-fit: cover;">
                        <source src="coca3.mp4" type="video/mp4">
                    </video>
                    <video autoplay loop muted playsinline style="width:100%; height:100%; object-fit: cover;">
                        <source src="coca4.mp4" type="video/mp4">
                    </video>
                </div>
            </div>
            <div class="door-desc uppercase text-red">
                <strong>Founder Tier.</strong> Secures 1 Bible and 1 Suit. Total immersion in the mission.
            </div>
            <button class="btn-enter" style="border-color: var(--brand-red); color: var(--brand-red);">Manifest The Suit</button>
        </div>
    </main>

    <section id="checkout-screen">
        <button class="back-btn uppercase" onclick="closeCheckout()">‚Üê Back</button>
        
        <div class="checkout-layout">
            <div class="checkout-visual" id="checkout-visual-container"></div>

            <div class="checkout-form-container">
                <div class="receipt-box" id="receipt-box">
                    <div class="receipt-header uppercase">
                        <span id="receipt-title">RECEIPT</span>
                        <span id="receipt-price">$0.00</span>
                    </div>
                    
                    <div style="margin-bottom: 30px; font-size: 0.8rem; line-height: 1.4; opacity: 0.8;" class="uppercase">
                        <strong>Availability:</strong> <span id="availability-tag" class="text-red">LIMITED SUPPLY</span><br>
                        <strong>Item:</strong> <span id="item-name">--</span><br>
                        <span id="item-details" style="display:block; margin-top:10px; font-size: 0.75rem; opacity: 0.7;"></span>
                    </div>

                    <button type="button" class="submit-btn" id="stripe-button" onclick="checkout()">
                        CONFIRM & PAY
                    </button>
                    
                    <p style="margin-top: 20px; font-size: 0.65rem; text-align: center; opacity: 0.5; line-height: 1.3;" class="uppercase">
                        Payments are processed securely via Stripe. Apple Pay and all major cards accepted. Artifacts are limited edition gifts for legal defense supporters.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <script>
        let activeCheckoutUrl = "";

        const RELICS = {
            candle: {
                title: "LO-003: FEMALE SEXUAL FRUSTRATION",
                price: "$88.00",
                item: "Liturgical Object 003 (Candle)",
                details: "Scented with REDACTED. Packaged in a familiar trade dress annexed for the Church.",
                url: "https://buy.stripe.com/9B63co5EJfnF6OX5lYdwc02",
                availability: "MADE TO ORDER / PRE-ORDER",
                mediaType: "image", 
                src: "IMG_2844.jpeg",
                btnText: "BURN THE INJUNCTION"
            },
            bible: {
                title: "THE DOCTRINE",
                price: "$1200.00",
                item: "CoCA Leather Bible",
                details: "Leather Bound. Red Letter Edition. 6.5\" x 9.5\".",
                url: "https://buy.stripe.com/28E00cgjndfx8X5dSudwc01",
                availability: "LIMITED EDITION",
                mediaType: "video",
                src: "coca4.mp4",
                btnText: "FUND THE PRECEDENT"
            },
            tracksuit: {
                title: "CoCA TRACKSUIT",
                price: "$450.00",
                item: "CoCA Tracksuit",
                details: "Heavyweight Cotton. Oversized Fit. Sizes collected at checkout.",
                url: "https://buy.stripe.com/5kQ00c0kpejBflteWydwc00",
                availability: "LIMITED EDITION",
                mediaType: "video",
                src: "coca3.mp4",
                btnText: "FORCE THE ISSUE"
            },
            founder: {
                title: "THE COMMITMENT",
                price: "$1500.00",
                item: "Founder Package",
                details: "Secures 1 Bible and 1 Suit. Total immersion in the mission.",
                url: "https://buy.stripe.com/cNi5kwffjdfxgpx6q2dwc03",
                availability: "LIMITED EDITION",
                mediaType: "mixed",
                src: "mixed",
                btnText: "MANIFEST THE SUIT"
            }
        };

        const checkoutScreen = document.getElementById('checkout-screen');
        const visualContainer = document.getElementById('checkout-visual-container');

        function selectRelic(key) {
            const data = RELICS[key];
            activeCheckoutUrl = data.url;
            
            document.getElementById('receipt-title').innerText = data.title;
            document.getElementById('receipt-price').innerText = data.price;
            document.getElementById('item-name').innerText = data.item;
            document.getElementById('item-details').innerText = data.details;
            document.getElementById('stripe-button').innerText = data.btnText;

            const availTag = document.getElementById('availability-tag');
            availTag.innerText = data.availability;
            availTag.className = data.availability.includes("MADE TO ORDER") ? "" : "text-red";
            
            // Visual Population
            let visualHTML = '';
            if(key === 'founder') {
                visualHTML = `
                    <div style="display:flex; gap:10px; width: 100%; height: 100%; align-items:center; justify-content:center;">
                        <video autoplay loop muted playsinline style="max-height:100%; width: 48%; border:2px solid currentColor; object-fit:cover;"><source src="coca3.mp4"></video>
                        <video autoplay loop muted playsinline style="max-height:100%; width: 48%; border:2px solid currentColor; object-fit:cover;"><source src="coca4.mp4"></video>
                    </div>`;
            } else {
                visualHTML = data.mediaType === 'image' 
                    ? `<img src="${data.src}" alt="${data.title}">`
                    : `<video autoplay loop muted playsinline><source src="${data.src}" type="video/mp4"></video>`;
            }
            
            visualContainer.innerHTML = visualHTML;
            checkoutScreen.style.display = 'block';
            document.body.style.overflow = 'hidden'; 
        }

        function checkout() {
            if(activeCheckoutUrl) {
                window.location.href = activeCheckoutUrl;
            }
        }

        function closeCheckout() {
            checkoutScreen.style.display = 'none';
            document.body.style.overflow = 'auto'; 
            visualContainer.innerHTML = '';
        }

        // Dark Mode Toggle Logic
        const themeBtn = document.getElementById('theme-toggle');
        themeBtn.addEventListener('click', () => {
            const isDark = document.body.classList.toggle('dark-mode');
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
            themeBtn.innerText = isDark ? '‚òÄÔ∏è LIGHT' : 'üåë DARK';
        });
    </script>
</body>
